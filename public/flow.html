<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' style='stop-color:%23667eea'/><stop offset='100%25' style='stop-color:%23764ba2'/></linearGradient></defs><circle cx='50' cy='50' r='45' fill='url(%23g)'/><path d='M50 25 L35 35 L35 50 Q35 65 50 70 Q65 65 65 50 L65 35 Z' fill='white'/><circle cx='50' cy='52' r='5' fill='url(%23g)'/><rect x='48' y='55' width='4' height='8' fill='url(%23g)'/></svg>">
    <title>KyberChat - 시스템 흐름도</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .header h1 {
            margin: 0;
            font-size: 48px;
            font-weight: 700;
        }
        
        .header p {
            margin: 10px 0 0 0;
            font-size: 18px;
            opacity: 0.95;
        }
        
        .content {
            padding: 50px 40px;
        }
        
        .back-btn {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 14px 30px;
            text-decoration: none;
            border-radius: 30px;
            margin-bottom: 40px;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .flow-title {
            text-align: center;
            font-size: 36px;
            color: #2c3e50;
            margin-bottom: 40px;
            font-weight: 700;
        }
        
        .flow-diagram {
            background: #f8f9fa;
            padding: 40px;
            border-radius: 20px;
            margin: 20px 0;
        }
        
        .flow-step {
            margin-bottom: 40px;
        }
        
        .flow-step:last-child {
            margin-bottom: 0;
        }
        
        .step-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .arrow-down {
            text-align: center;
            font-size: 40px;
            color: #4facfe;
            margin: 25px 0;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 25px;
            align-items: center;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            align-items: center;
        }
        
        .box {
            padding: 25px;
            border-radius: 12px;
            color: white;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .box-icon {
            font-size: 36px;
            margin-bottom: 12px;
        }
        
        .box-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .box-desc {
            font-size: 14px;
            opacity: 0.9;
            line-height: 1.5;
        }
        
        .gradient-purple {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .gradient-pink {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .gradient-blue {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .gradient-orange {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #2c3e50;
        }
        
        .gradient-cyan {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #2c3e50;
        }
        
        .color-green {
            background: #28a745;
        }
        
        .color-gray {
            background: #6c757d;
        }
        
        .color-red {
            background: #dc3545;
        }
        
        .small-box {
            padding: 18px;
            font-size: 15px;
        }
        
        .info-box {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 3px solid #4facfe;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.2);
            text-align: center;
        }
        
        .info-note {
            margin-top: 15px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 15px;
            color: #666;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 32px;
            }
            
            .flow-title {
                font-size: 28px;
            }
            
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .arrow-down {
                font-size: 32px;
                margin: 15px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <svg width="70" height="70" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" fill="white" opacity="0.2"/>
                    <path d="M50 25 L35 35 L35 50 Q35 65 50 70 Q65 65 65 50 L65 35 Z" fill="white"/>
                    <circle cx="50" cy="52" r="5" fill="rgba(102, 126, 234, 0.3)"/>
                    <rect x="48" y="55" width="4" height="8" fill="rgba(102, 126, 234, 0.3)"/>
                </svg>
                <h1>KyberChat</h1>
            </div>
            <p>Kyber KEM 기반 엔드투엔드 암호화 채팅 시스템 흐름도</p>
        </div>
        
        <div class="content">
            <a href="index.html" class="back-btn">← 채팅으로 돌아가기</a>
            
            <h2 class="flow-title">📊 전체 시스템 흐름도</h2>
            
            <div class="flow-diagram">
                
                <!-- Step 1: 초기화 -->
                <div class="flow-step">
                    <div class="grid-2">
                        <div class="box gradient-purple">
                            <div class="box-icon">💻</div>
                            <div class="box-title">클라이언트 A</div>
                            <div class="box-desc">
                                1. Kyber WASM 로드<br>
                                2. WebSocket 연결<br>
                                3. 키 쌍 생성
                            </div>
                        </div>
                        
                        <div style="font-size: 42px; color: #667eea;">↔️</div>
                        
                        <div class="box gradient-pink">
                            <div class="box-icon">📱</div>
                            <div class="box-title">클라이언트 B</div>
                            <div class="box-desc">
                                1. Kyber WASM 로드<br>
                                2. WebSocket 연결<br>
                                3. 키 쌍 생성
                            </div>
                        </div>
                    </div>
                </div>

                <div class="arrow-down">⬇️</div>

                <!-- Step 2: 공개키 교환 -->
                <div class="flow-step">
                    <div class="info-box">
                        <div style="font-size: 40px; margin-bottom: 12px;">🔄</div>
                        <div style="font-size: 24px; font-weight: 700; color: #2c3e50; margin-bottom: 15px;">
                            공개키 교환
                        </div>
                        <div class="info-note">
                            <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 12px;">
                                <div>A 공개키(800B) → 서버 → B</div>
                                <div>B 공개키(800B) → 서버 → A</div>
                            </div>
                        </div>
                        <div style="margin-top: 12px; font-size: 14px; color: #e74c3c; font-weight: 600;">
                            ⚠️ 서버는 공개키만 중계, 비밀키는 클라이언트에만 저장
                        </div>
                    </div>
                </div>

                <div class="arrow-down">⬇️</div>

                <!-- Step 3: 메시지 암호화 및 전송 -->
                <div class="flow-step">
                    <div class="grid-3">
                        <div class="box gradient-purple small-box">
                            <div style="font-size: 28px;">📝</div>
                            <div style="font-weight: 700; margin: 8px 0;">메시지 작성</div>
                            <div style="font-size: 13px;">"안녕하세요"</div>
                        </div>
                        
                        <div style="font-size: 28px; text-align: center;">→</div>
                        
                        <div class="box color-green small-box">
                            <div style="font-size: 28px;">🔐</div>
                            <div style="font-weight: 700; margin: 8px 0;">Kyber 암호화</div>
                            <div style="font-size: 12px;">B의 공개키 사용</div>
                        </div>
                        
                        <div style="font-size: 28px; text-align: center;">→</div>
                        
                        <div class="box color-gray small-box">
                            <div style="font-size: 28px;">📤</div>
                            <div style="font-weight: 700; margin: 8px 0;">서버 전송</div>
                            <div style="font-size: 12px;">암호문 중계</div>
                        </div>
                    </div>
                </div>

                <div class="arrow-down">⬇️</div>

                <!-- Step 4: 메시지 수신 및 복호화 -->
                <div class="flow-step">
                    <div class="grid-3">
                        <div class="box color-gray small-box">
                            <div style="font-size: 28px;">📥</div>
                            <div style="font-weight: 700; margin: 8px 0;">서버 수신</div>
                            <div style="font-size: 12px;">암호문 전달</div>
                        </div>
                        
                        <div style="font-size: 28px; text-align: center;">→</div>
                        
                        <div class="box color-red small-box">
                            <div style="font-size: 28px;">🔓</div>
                            <div style="font-weight: 700; margin: 8px 0;">Kyber 복호화</div>
                            <div style="font-size: 12px;">B의 비밀키 사용</div>
                        </div>
                        
                        <div style="font-size: 28px; text-align: center;">→</div>
                        
                        <div class="box gradient-pink small-box">
                            <div style="font-size: 28px;">💬</div>
                            <div style="font-weight: 700; margin: 8px 0;">메시지 표시</div>
                            <div style="font-size: 13px;">"안녕하세요"</div>
                        </div>
                    </div>
                </div>

                <div class="arrow-down">⬇️</div>

                <!-- Step 5: 화면 암호화 표시 -->
                <div class="flow-step">
                    <div class="step-content" style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); border: 3px solid #ff9a76;">
                        <div style="text-align: center;">
                            <div style="font-size: 40px; margin-bottom: 12px;">⏱️</div>
                            <div style="font-size: 24px; font-weight: 700; color: #2c3e50; margin-bottom: 20px;">
                                자동 암호화 표시 (10초 후)
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 20px; align-items: center;">
                                <div style="background: white; padding: 20px; border-radius: 12px;">
                                    <div style="font-weight: 700; margin-bottom: 8px; color: #2c3e50;">평문 표시</div>
                                    <div style="font-size: 16px;">"안녕하세요"</div>
                                </div>
                                <div style="font-size: 32px;">→</div>
                                <div style="background: white; padding: 20px; border-radius: 12px;">
                                    <div style="font-weight: 700; margin-bottom: 8px; color: #2c3e50;">암호화 표시</div>
                                    <div style="font-size: 14px; font-family: monospace; color: #666;">🔐 a3f2b9c...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="arrow-down">⬇️</div>

                <!-- Step 6: 비밀번호 복호화 -->
                <div class="flow-step">
                    <div class="step-content" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); border: 3px solid #5ee7df;">
                        <div style="text-align: center;">
                            <div style="font-size: 40px; margin-bottom: 12px;">🔑</div>
                            <div style="font-size: 24px; font-weight: 700; color: #2c3e50; margin-bottom: 20px;">
                                비밀번호 입력 (1234)
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr auto 1fr auto 1fr; gap: 15px; align-items: center;">
                                <div style="background: white; padding: 18px; border-radius: 10px; font-size: 15px; color: #2c3e50;">
                                    암호화 표시<br>화면 클릭
                                </div>
                                <div style="font-size: 24px;">→</div>
                                <div style="background: white; padding: 18px; border-radius: 10px; font-size: 15px; color: #2c3e50;">
                                    비밀번호<br>입력 모달
                                </div>
                                <div style="font-size: 24px;">→</div>
                                <div style="background: white; padding: 18px; border-radius: 10px; font-size: 15px; color: #2c3e50;">
                                    전체 메시지<br>평문 복원
                                </div>
                            </div>
                            <div style="margin-top: 20px; padding: 15px; background: white; border-radius: 10px; font-size: 15px; color: #666;">
                                💡 10초 후 자동으로 다시 암호화 표시
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            
            <div style="text-align: center; margin-top: 40px;">
                <a href="index.html" class="back-btn">← 채팅으로 돌아가기</a>
            </div>
        </div>
    </div>
</body>
</html>
